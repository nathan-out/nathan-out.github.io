

<!DOCTYPE html>
<html
  lang="fr"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="false"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="fr" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Créer un dégradé d&#39;image : un vrai défi &middot; nathan.out</title>
    <meta name="title" content="Créer un dégradé d&#39;image : un vrai défi &middot; nathan.out" />
  
  
  
  
  
  <link rel="canonical" href="https://nathan-out.github.io/posts/creer-un-degrade-dimage-un-vrai-defi/" />
  
  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.ea687d8266d49c8458de5e1976f497e756871208668c71fca911f7f8e811e99c54bbc50671d8ec03852eb4ae53d98710107347a36a7c175b0cbbf02eedb72a76.css"
    integrity="sha512-6mh9gmbUnIRY3l4ZdvSX51aHEghmjHH8qRH3&#43;OgR6ZxUu8UGcdjsA4UutK5T2YcQEHNHo2p8F1sMu/Au7bcqdg=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js" integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1&#43;ko&#43;UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
  
    
    
    
  
  
    
    
  
  
  
    
    <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.15ae6e2c9b1ac24a9ccf40003fa689efb1a18db1ee9b73d780b01a6c31b150441415862513e93184f68fe385759e4698b8763cba6a0f79493c1fed99ad5868d4.js" integrity="sha512-Fa5uLJsawkqcz0AAP6aJ77GhjbHum3PXgLAabDGxUEQUFYYlE&#43;kxhPaP44V1nkaYuHY8umoPeUk8H&#43;2ZrVho1A==" data-copy="Copier" data-copied="Copié"></script>
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Créer un dégradé d&#39;image : un vrai défi" />
<meta property="og:description" content="Trier des images pour les classer en dégradé de couleur, voilà quelque chose qui paraît trivial et sans intérêt au premier abord, et si c&rsquo;était en réalité beaucoup plus difficle et intéressant que ça ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nathan-out.github.io/posts/creer-un-degrade-dimage-un-vrai-defi/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-23T09:45:36+02:00" />
<meta property="article:modified_time" content="2022-10-23T09:45:36+02:00" /><meta property="og:site_name" content="nathan.out" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Créer un dégradé d&#39;image : un vrai défi"/>
<meta name="twitter:description" content="Trier des images pour les classer en dégradé de couleur, voilà quelque chose qui paraît trivial et sans intérêt au premier abord, et si c&rsquo;était en réalité beaucoup plus difficle et intéressant que ça ?"/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Mes articles",
    "name": "Créer un dégradé d\u0027image : un vrai défi",
    "headline": "Créer un dégradé d\u0027image : un vrai défi",
    
    "abstract": "Trier des images pour les classer en dégradé de couleur, voilà quelque chose qui paraît trivial et sans intérêt au premier abord, et si c\u0026rsquo;était en réalité beaucoup plus difficle et intéressant que ça ?",
    "inLanguage": "fr",
    "url" : "https:\/\/nathan-out.github.io\/posts\/creer-un-degrade-dimage-un-vrai-defi\/",
    "author" : {
      "@type": "Person",
      "name": "nathan.out"
    },
    "copyrightYear": "2022",
    "dateCreated": "2022-10-23T09:45:36\u002b02:00",
    "datePublished": "2022-10-23T09:45:36\u002b02:00",
    
    "dateModified": "2022-10-23T09:45:36\u002b02:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "2691"
  }]
  </script>


  
  <meta name="author" content="nathan.out" />
  
    
      <link href="https://github.com/nathan-out" rel="me" />
    
  
  
  






  
  
  
  


  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Aller au contenu</a
      >
    </div>
    
    
      <header class="py-6 font-semibold sm:py-10 text-neutral-900 dark:text-neutral print:hidden">
  <nav class="flex justify-between">
    
    <div>
      
        <a
          class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
          rel="me"
          href="/"
          >nathan.out</a
        >
      

    </div>
    
    
      <ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row">
        
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/posts/"
                title="Mes articles"
                >Articles</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/projets/"
                title="Projets"
                >Projets</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/a-propos/"
                title="A Propos"
                >A propos</a
              >
            </li>
          
        
        
          <li class="ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
            <button
              id="search-button"
              class="text-base hover:text-primary-600 dark:hover:text-primary-400"
              title="Rechercher (/)"
            >
              

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
          </li>
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >Blog</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/"
      >Mes articles</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/creer-un-degrade-dimage-un-vrai-defi/"
      >Créer un dégradé d&#39;image : un vrai défi</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Créer un dégradé d'image : un vrai défi
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2022-10-23 09:45:36 &#43;0200 CEST">23 octobre 2022</time><span class="px-2 text-primary-500">&middot;</span><span title="Temps de lecture">13 mins</span>
    

    
    
  </div>

  
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
        <div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last">
          <div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden">
            <details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700"
  >
    Sommaire
  </summary>
  <div
    class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"
  >
    <nav id="TableOfContents">
  <ul>
    <li><a href="#un-feed-instagram-pas-comme-les-autres">Un feed Instagram pas comme les autres</a></li>
    <li><a href="#une-approche-bien-trop-naïve">Une approche bien trop naïve</a></li>
    <li><a href="#du-calcul-de-k-means-clustering">Du calcul de &ldquo;K-means clustering&rdquo;</a>
      <ul>
        <li><a href="#théorie">Théorie</a></li>
        <li><a href="#pratique-avec-exemples">Pratique avec exemples</a></li>
      </ul>
    </li>
    <li><a href="#le-tri--encore-une-approche-naïve">Le tri : encore une approche naïve</a>
      <ul>
        <li><a href="#vous-avez-dit-une-couleur-proche-">Vous avez dit une couleur proche ?</a></li>
      </ul>
    </li>
    <li><a href="#le-tris--pas-si-simple-quil-ny-paraît">Le tris : pas si simple qu&rsquo;il n&rsquo;y paraît</a>
      <ul>
        <li><a href="#un-problème-sans-solution">Un problème sans solution</a></li>
        <li><a href="#nos-chers-voisins">Nos chers voisins&hellip;</a></li>
      </ul>
    </li>
    <li><a href="#optimisation">Optimisation</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <p><em>Trier des images pour les classer en dégradé de couleur, voilà quelque chose qui paraît trivial et sans intérêt au premier abord, et si c&rsquo;était en réalité beaucoup plus difficle et intéressant que ça ? Le code en Python est disponible <a href="https://github.com/nathan-out/instagram-feed-creator/">sur mon Github</a>.</em></p>
<h2 id="un-feed-instagram-pas-comme-les-autres" class="relative group">Un feed Instagram pas comme les autres <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#un-feed-instagram-pas-comme-les-autres" aria-label="Ancre">#</a></span></h2>
<p>Le <em>feed</em> est l&rsquo;ensemble des publications d&rsquo;un compte Instagram, c&rsquo;est là où sont regroupées toutes vos photos, vos réels etc&hellip; C&rsquo;est la partie visible du compte, il doit être le plus attirant possible afin de susciter de l&rsquo;engagement.</p>
<p>Je discutais avec une amie à propos de mon bot Instagram, <a href="https://www.instagram.com/archie_the_aesthete/">@archie_the_aesthete</a>, qui ne trouve pas son public (d&rsquo;ailleurs si vous voulez savoir comment je l&rsquo;ai créé, je vous invite à lire mon article à ce propos : <a href="/posts/jai-cree-un-bot-instagram-100-pourcent-legal-et-totalement-automatise/">J&rsquo;ai créé un bot Instagram 100% légal et totalement automatisé</a>). Selon elle, le principal défaut de mon bot est qu&rsquo;il n&rsquo;a pas un beau feed. Pour illustrer l&rsquo;importance de ce critère, elle me fait découvrir le compte Insta de <a href="https://www.instagram.com/charlie__danger/">@charlie__danger</a>, tout en se demandant comment cette créatrice peut faire pour arriver à un tel résultat. Je vous invite d&rsquo;ailleurs à <a href="https://www.youtube.com/c/LesRevuesduMonde">suivre cette personne sur Youtube</a> si vous aimez l&rsquo;Archéologie et l&rsquo;Histoire.</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/feed-charlie-danger.jpg" alt="Le feed Instagram de Charlie Danger, une créatrice de contenu sur internet" />
      
    </figure>
  

</p>
<figcaption>Une partie du feed Instagram de Charlie Danger, une créatrice de contenu sur internet. En haut à gauche les photos les plus récentes, en bas à droite les plus anciennes.</figcaption>
<p>J&rsquo;émets alors l&rsquo;hypothèse d&rsquo;un algorithme qui classerait les images, tout en imaginant les grandes ligne du programme. Je lui indique alors que cela ne me semble pas compliqué au premier abord (quelle erreur à posteriori !) et que je pourrais même le développer pour elle. Je n&rsquo;imaginais pas tout ce qui se cachait derrière&hellip;</p>
<h2 id="une-approche-bien-trop-naïve" class="relative group">Une approche bien trop naïve <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#une-approche-bien-trop-na%c3%afve" aria-label="Ancre">#</a></span></h2>
<p>La première étape est d&rsquo;extraire, pour chaque image, les informations permettant de savoir si elle est plutôt bleue, verte ou jaune. J&rsquo;ai tout d&rsquo;abord pensé à <strong>extraire la couleur moyenne de chaque image</strong>, je suis tombé sur cette question Stackoverflow : <a href="https://stackoverflow.com/questions/43111029/how-to-find-the-average-colour-of-an-image-in-python-with-opencv">How to find the average colour of an image in Python with OpenCV?</a>. Là-bas, un utilisateur visiblement bien plus callé en imagerie que moi conseille plutôt d&rsquo;utiliser les <strong>couleurs dominantes</strong> plutôt que la <strong>couleur moyenne</strong>. Pourquoi ? <strong>Car la couleur moyenne ne fait pas resortir les dominantes de couleurs que l&rsquo;humain voit</strong>, or, c&rsquo;est justement ce que je recherche ici ; créer de la cohérence pour l&rsquo;oeil humain.</p>
<p>Il explique et illustre le concept de couleur dominante d&rsquo;une image dont voici une traduction en français (reponse de Tonechas sur le post Stackoverflow, je vous invite à lire sa réponse si le sujet vous intéresse, c&rsquo;est très bien détaillé) :</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/exemple-dominant-color.png" alt="Image de Légo pour illustrer le concept de couleur dominante." />
      
    </figure>
  

</p>
<figcaption>Une image de Légo avec une dominante rouge.</figcaption>
<blockquote cite="https://stackoverflow.com/questions/43111029/how-to-find-the-average-colour-of-an-image-in-python-with-opencv">
Voyons comment se présentent ces couleurs pour mieux comprendre les différences entre les deux approches. Dans la partie gauche de la figure ci-dessous est affichée la couleur moyenne. Il apparaît clairement que la couleur moyenne calculée ne décrit pas correctement le contenu en couleur de l'image originale. En fait, il n'y a pas un seul pixel avec cette couleur dans l'image originale. La partie droite de la figure montre les cinq couleurs les plus représentatives triées de haut en bas par ordre décroissant d'importance (fréquence d'apparition). Cette palette met en évidence que la couleur dominante est le rouge, ce qui est cohérent avec le fait que la plus grande région de couleur uniforme dans l'image originale correspond à la pièce de Lego rouge.
</blockquote>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/resultat.png" alt="Couleur moyenne VS couleurs dominantes." />
      
    </figure>
  

</p>
<figcaption>Résultat du calcul couleur moyenne (gauche) VS couleurs dominantes (droite).</figcaption>
<h2 id="du-calcul-de-k-means-clustering" class="relative group">Du calcul de &ldquo;K-means clustering&rdquo; <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#du-calcul-de-k-means-clustering" aria-label="Ancre">#</a></span></h2>
<h3 id="théorie" class="relative group">Théorie <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#th%c3%a9orie" aria-label="Ancre">#</a></span></h3>
<p>Une méthode pour calculer les couleurs dominantes est le <strong>K-means clustering, ou K-moyennes en français</strong>. Je ne vais pas rentrer dans les détails de cette méthode, déjà car je ne suis pas compétent, mais également car ça n&rsquo;est pas le sujet de l&rsquo;article. Je vous invite à consulter cette page : <a href="https://en.wikipedia.org/wiki/K-means_clustering">Wikipédia - k-means clustering</a> si le sujet vous intéresse (la page en anglais est plus complète que celle en français). Car une illustration vaut plus que mille mots, ce gif devrait vous aider à <em>sentir</em> ce que permet de faire le k-mean-clustering.</p>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300">Les informations ci-dessous peuvent être imprécises ou fausses. Pour plus d&rsquo;information, consultez <a href="https://en.wikipedia.org/wiki/K-means_clustering">Wikipédia - k-means clustering</a>.</span>
</div>

<p>Cette animation ci-dessous montre qu&rsquo;au fur et à mesure des itérations, nos 3 points noirs se rapprochent de ce qui semble être 3 points moyens de nos 3 sous-ensembles (rouge, jaune et bleu), on appelle ça les <strong>centres de cluster, ou centroïdes de cluster</strong>. C&rsquo;est ce qu&rsquo;on appelle la <strong>convergence des k-moyennes</strong>. Ici, on a définit arbitrairement qu&rsquo;il nous fallait découper tous nos points en 3 sous-ensemble, ça aurait pu être 4, 2, 37&hellip; On a aussi définit arbitrairement qu&rsquo;il fallait itérer (faire le calcul) 14 fois, plus on met d&rsquo;itération et plus on se rapproche de la véritable moyenne (mais plus les calculs sont longs). <strong>L&rsquo;idée étant de tendre vers k points (ici 3) qui sont au plus proches de tous les autres points du sous-ensemble.</strong> Ce faisant, on partitionne nos données en k-ensemble.</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/K-means_convergence.gif" alt="Animation qui montre la convergence de 3 centroïdes de cluster sur cet ensemble de données au fur et à mesure des itérations (calculs de distance)." />
      
    </figure>
  

</p>
<figcaption>Animation qui montre la convergence de 3 centroïdes de cluster sur cet ensemble de données au fur et à mesure des itérations (calculs de distance).</figcaption>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300"><strong>Ce qu&rsquo;il faut retenir ici, c&rsquo;est que cette méthode nous permet d&rsquo;obtenir les k-premières couleurs dominantes d&rsquo;une image.</strong></span>
</div>

<h3 id="pratique-avec-exemples" class="relative group">Pratique avec exemples <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#pratique-avec-exemples" aria-label="Ancre">#</a></span></h3>
<p>J&rsquo;ai choisi de régler mon calcul des k-moyennes de sorte à trouver les <strong>5</strong> couleurs dominantes en <strong>300</strong> itérations (valeur par défaut). Peut-être que ces paramètres ne sont pas optimaux en terme de performance (on verra plus bas que ce sont ces calculs qui ralentissent mon programme), mais pour le moment ils me suffisent à produire un résultat satisfaisant.</p>
<p>Voici plusieurs exemples pour se convaincre que cette méthode produit des résultats intéressants, sous chaque image vous avez les 5 couleurs dominantes produites à partir de la méthodes des k-means clustering, plus la couleur est dominante, plus le rectangle associé est grand :</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/examples.jpg" alt="4 exemples de l&amp;rsquo;extraction des 5 couleurs dominantes d&amp;rsquo;une image avec la méthode des k-means clustering." />
      
    </figure>
  

</p>
<figcaption>4 exemples de l'extraction des 5 couleurs dominantes d'une image avec la méthode des k-means clustering.</figcaption>
<h2 id="le-tri--encore-une-approche-naïve" class="relative group">Le tri : encore une approche naïve <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#le-tri--encore-une-approche-na%c3%afve" aria-label="Ancre">#</a></span></h2>
<p>Maintenant que je suis parvenu à isoler les couleurs dominantes de mes images, il faut les classer pour obtenir un dégradé de couleur. J&rsquo;ai donc créé une <strong>structure de donnée</strong> qui se présente comme suit :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;image1.jpg&#39;</span>: [
</span></span><span style="display:flex;"><span>		[pourcentage_couleur1, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur2, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur3, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur4, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur5, R, G, B]
</span></span><span style="display:flex;"><span>	], 
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#39;image2.png&#39;</span>:[
</span></span><span style="display:flex;"><span>		[pourcentage_couleur1, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur2, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur3, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur4, R, G, B],
</span></span><span style="display:flex;"><span>		[pourcentage_couleur5, R, G, B]
</span></span><span style="display:flex;"><span>	],
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Chaque image est indexée par son nom et comporte ses données associées. Il reste ensuite à les classer. Ma première apprcoche fut la suivante :</p>
<ul>
<li>prendre la première couleur dominante de ma première image dans ma structure</li>
<li>parcourir toutes les autres images et trouver celle qui a la couleur dominante <strong>la plus proche</strong> de mon image courante</li>
<li>sauvegarder cette seconde image comme étant la plus proche de ma première</li>
<li>supprimer cette image de ma structure de donnée</li>
<li>recommencer jusqu&rsquo;à ce qu&rsquo;il n&rsquo;y ait plus d&rsquo;image dans ma structure de donnée</li>
</ul>
<h3 id="vous-avez-dit-une-couleur-proche-" class="relative group">Vous avez dit une couleur proche ? <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#vous-avez-dit-une-couleur-proche-" aria-label="Ancre">#</a></span></h3>
<blockquote cite="https://nathan-out.github.io/posts/creer-un-degrade-dimage-un-vrai-defi/">
parcourir toutes les autres images et trouver celle qui a la couleur dominante la plus proche de mon image courante
</blockquote>
<p>Comment faire ça ? Une approche intuitive serait de calculer la <em>distance</em> entre 2 couleurs. Une couleur peut être représentée par 3 entiers : sa composante rouge, verte et bleue, allant de 0 à 255. C&rsquo;est ce qu&rsquo;on appelle le <strong>RGB</strong>. On peut donc représenter une couleur comme étant un point dans un espace en 3 dimensions. Un bleu foncé aura cette représentation RGB :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>red: 0, green: 18:, blue: 101</span></span></code></pre></div>
<p>ce qui donne cette couleur : <div style="background-color:#001265;width:50px;height:50px;"></div></p>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300">A noter qu&rsquo;il existe d&rsquo;autres représentation des couleurs, comme HSL ou CIELAB par exemple. Pour plus d&rsquo;information, je vous invite à consulter cette page Wikipédia : <a href="https://fr.wikipedia.org/wiki/Espace_de_couleur">Espace de couleur</a>.</span>
</div>

<p>Puisqu&rsquo;une couleur est un point, on peut calculer une distance entre deux points. Pour cela rien de plus simple ; soient deux couleurs c1 et c2 avec pour coordonnées respectivement rc1, gc1, bc1 et rc2, gc2, bc2, alors la distance entre ces deux couleurs se calcule comme étant :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>distance = (r, g, b)
</span></span><span style="display:flex;"><span>distance = (rc2-rc1, gc2-gc1, bc2-bc1)</span></span></code></pre></div>
<p>Une distance étant toujours positive, je fais passer mes trois composantes dans la fonction valeur absolue. Pour rappel : valeur_absolue(-3) = 3 et valeur_absolue(5) = 5. Je fais cela pour toutes mes images et je sélectionne l&rsquo;image qui a la distance la plus courte par rapport à l&rsquo;image que je souhaite classer.</p>
<p>J&rsquo;ai vite observé que cette méthode de calcul de distance ne fonctionnait pas. Le défaut est qu&rsquo;on ne s&rsquo;intéresse qu&rsquo;à la couleur la plus dominante. Si on calcule la <strong>moyenne pondérée</strong> (rappelez-vous, on dispose également du pourcentage de chaque couleur dominante) des 5 couleurs dominantes de l&rsquo;image et qu&rsquo;on calcule ensuite la distance, l&rsquo;algorithme sort un tris intéressant :</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/comparatif-calcul-distance.jpg" alt="Comparatif de tris entre la méthode de calcul de distance à partir de la couleur dominante (gauche) et la méthode de la moyenne pondérée des couleurs dominantes (droite)." />
      
    </figure>
  

</p>
<figcaption>Comparatif de tris entre la méthode de calcul de distance à partir de la couleur dominante (gauche) et la méthode de la moyenne pondérée des couleurs dominantes (droite).</figcaption>
<h2 id="le-tris--pas-si-simple-quil-ny-paraît" class="relative group">Le tris : pas si simple qu&rsquo;il n&rsquo;y paraît <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#le-tris--pas-si-simple-quil-ny-para%c3%aet" aria-label="Ancre">#</a></span></h2>
<p>Le résultat commence à prendre forme mais il y a encore un problème : plus on approche de la fin 	et moins les images semblent triées. Cela est dû au fait que plus on approche de la fin : plus le choix restant dans les images est limité. Rappelez-vous : <strong>on supprime au fur et à mesure les images triées de notre structure de donnée</strong>. Pour autant, on ne peut pas laisser les images triées dans notre structure, on tournerait en rond&hellip;</p>
<p>Second problème, les images ne sont pas vraiment regroupées par couleurs. Ou plutôt, elles ne sont pas regroupées <strong>totalement</strong> par couleur. On l&rsquo;observe déjà sur la partie droite de l&rsquo;image précédente : on commence par les bleues, suivent les jaunes, puis de nouveau quelques bleues.</p>
<p>Troisième problème, et pas des moindres, ce que j&rsquo;appelle des <strong>divergences locales</strong>. Pour illustrer cette idée : regardons le tris produit ci-dessous sur une population plus importante d&rsquo;images.</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/divergence-locale.png" alt="Illustration des &amp;ldquo;divergences locales&amp;rdquo;." />
      
    </figure>
  

</p>
<figcaption>Illustration des "divergences locales", entourées en orange.</figcaption>
<p>On observe quelques incohérences, j&rsquo;en ai encadré certaines. Mon hypothèse est que cela est dû à une divergence du tris, je m&rsquo;explique. Posons six images : A, B, C, D, E et F. Posons que A, B, C et D soient globalement vertes-bleues, et E bleue-jaune (elle apparaîtra donc verte puisqu&rsquo;on va faire une moyenne) et F jaune. On peut supposer que notre algorithme fasse ce tris :</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/divergence-locale-exemple.png" alt="" />
      
    </figure>
  

</p>
<p>A ce moment, on observe bien une <strong>divergence</strong> à partir de C en direction du vert puis du jaune, avant de retourner au bleu plus foncé qui avait été ignoré. A noter que ce problème est différent que le premier énoncé. En effet, il peut rester suffisement d&rsquo;images après D et une divergence pourra quand même se produire, c&rsquo;est ce qu&rsquo;on observe sur l&rsquo;image avec les encadrés oranges. Cela produira nécessairement une <strong>rupture</strong> dans notre dégradé alors qu&rsquo;une meilleure solution est possible.</p>
<h3 id="un-problème-sans-solution" class="relative group">Un problème sans solution <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#un-probl%c3%a8me-sans-solution" aria-label="Ancre">#</a></span></h3>
<p>Alors je me suis creusé la tête pendant longtemps pour trouver une solution à ce problème. Plus je creusais et plus cela me semblait difficile&hellip; J&rsquo;ai tenté une approche par les graphes, une sorte de plus court chemin et je suis arrivé à la conclusion qu&rsquo;il me fallait un <strong>ordre total</strong> entre toutes les couleurs de mes images. Cela me permettrait d&rsquo;avoir <strong>le meilleur tris possible</strong>. Pour ceux qui désirent savoir ce qu&rsquo;est un ordre total, je vous invite à lire cette page : <a href="https://fr.wikipedia.org/wiki/Ordre_total">Wikipédia - Ordre total</a>.</p>
<p>Je suis alors tombé sur cet article véritablement passionnant qui répondait en partie à mon problème : <a href="https://www.alanzucconi.com/2015/09/30/colour-sorting/">The incredibly challenging task of sorting colours</a>. Surprise, il est question d&rsquo;ordre total ! J&rsquo;étais sur la bonne voie&hellip; Mes espoirs ont cependant été vites douchés lorsque j&rsquo;ai lu ces lignes :</p>
<blockquote cite="https://www.alanzucconi.com/2015/09/30/colour-sorting/">
Supposons que vous représentiez des couleurs avec leurs valeurs RVB, il n'existe pas de moyen standard d'ordonner les triplets dans une ligne, puisqu'ils ne sont naturellement pas organisés de manière linéaire. [...] Je peux vous arrêter ici et vous dire qu'il n'y a pas de solution à ce problème.
</blockquote>
<p>Bon, à priori ma recherche était vaine mais la suite de l&rsquo;article détaille le problème et propose des solutions. Je vous invite à le lire mais la solution que j&rsquo;ai retenue est celle des <strong>plus proches voisins</strong>.</p>
<h3 id="nos-chers-voisins" class="relative group">Nos chers voisins&hellip; <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#nos-chers-voisins" aria-label="Ancre">#</a></span></h3>
<p>Parce qu&rsquo;il n&rsquo;y avait pas encore assez de pages wikipédia ici, je vais en rajouter une (la dernière), celle à propos de <strong>l&rsquo;algorithme des plus proches voisins</strong> : <a href="https://en.wikipedia.org/wiki/Nearest_neighbour_algorithm">Wikipédia - Nearest neighbour algorithm</a>. Sans rentrer dans le détail, cet algorithme permet de trouver un chemin &ldquo;optimal&rdquo; entre des points (cf l&rsquo;illustration ci-dessous). <strong>Nos points sont simplement des valeurs de couleurs, et cet algorithme permet de les trier !</strong></p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/Nearestneighbor.gif" alt="Animation illustrant le fonctionnement de l&amp;rsquo;algorithme des plus proches voisins." />
      
    </figure>
  

</p>
<figcaption>Animation illustrant le fonctionnement de l'algorithme des plus proches voisins.</figcaption>
<div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900">
  <span class="ltr:pr-3 rtl:pl-3 text-primary-400">
    

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>
  <span class="dark:text-neutral-300">A noter que cet algorithme n&rsquo;est pas parfait, notamment car il ne permet pas de répondre rigoureusement (entendez par là mathématiquement) au <a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">problème du voyageur de commerce</a>. Cependant, c&rsquo;est une approximation suffisamment satisfaisante pour moi.</span>
</div>

<p>Dernier inconvénient, la <strong>complexité</strong> de l&rsquo;algorithme : O(n²). Cela signifie, en gros, que pour n images à trier, on va avoir besoin de n² opérations :</p>
<ul>
<li>10 images : 10² = 100 opérations</li>
<li>60 images (environ le nombre que j&rsquo;avais pour tester mon algorithme) : 3600 opérations</li>
</ul>
<p>L&rsquo;implémentation que j&rsquo;ai trouvée de cet algorithme est optimisée mais on reste dans les mêmes ordres de grandeur. Les résultats obtenus sont sans appels, à gauche, l&rsquo;ancien algorithme de tris, à droite, le résultat avec l&rsquo;algorithme des plus proches voisins :</p>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/img/blog/creer-un-degrade-dimage-un-vrai-defi/comparatif-tri.jpg" alt="Comparatif des résultats des méthodes de tris. A gauche, l&amp;rsquo;ancien algorithme de tris, à droite, le résultat avec l&amp;rsquo;algorithme des plus proches voisins." />
      
    </figure>
  

</p>
<figcaption>Comparatif des résultats des méthodes de tris. A gauche, l'ancien algorithme de tris, à droite, le résultat avec l'algorithme des plus proches voisins.</figcaption>
<p>Certes, il existe encore des imperfections (au début), l&rsquo;algorithme n&rsquo;est pas parfait mais peut-être est-ce à cause de ma moyenne pondérée. J&rsquo;ai tenté d&rsquo;autres approches mais aucune n&rsquo;a donné un résultat aussi propre que celle-là. On observe que les divergences locales ont disparues ! C&rsquo;est une réussite sur ce point là !</p>
<h2 id="optimisation" class="relative group">Optimisation <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#optimisation" aria-label="Ancre">#</a></span></h2>
<p>Le programme total est assez lent sur mon ordinateur, pour les images ci-dessus, comptez plusieurs minutes. La partie la plus longue est assurément le calcul de clustering ; pour une image de 600 * 800 px il me faut environ 50 secondes pour ce calcul. J&rsquo;ai essayé d&rsquo;optimiser cela en essayant de <strong>multiprocesser</strong> (utiliser toutes la puissance disponible du processeur) cette partie, mais il s&rsquo;est avéré que la librairie derrière le faisait déjà (pas étonnant !), inutile de multiprocesser quelque-chose qui l&rsquo;est déjà. On pourrait cependant redimensionner les images avant calcul pour limiter le coût. En vérité la librairie le fait déjà mais je ne sais pas dans quelle mesure. <strong>Il est inutile de faire passer une image en 4K, le résultat sera similaire à cette même image réduite</strong>.</p>
<p>On peut également diminuer le nombre de cluster (couleur dominante) à calculer. On pourrait passer à 4 ou 3 mais le tris en serait impacté. On peut également réduire le nombre d&rsquo;itération (par défaut 300) du clustering, je ne pense pas que cela impacte significativement la pertinence du tris. Enfin, on pourrait créer un fichier JSON qui contiendrait les valeurs de clustering pour chaque hash d&rsquo;image. Puisqu&rsquo;un hash est unique, il suffirait de hasher l&rsquo;image, regarder si ce hash se trouve dans le fichier, et si c&rsquo;est le cas utiliser les valeurs déjà calculées précédemment. Le gain dépend de la façon dont on utilise le programme.</p>
<h2 id="conclusion" class="relative group">Conclusion <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conclusion" aria-label="Ancre">#</a></span></h2>
<p>Il est fascinant de découvrir tout ce qui se cache derrière une simple idée : trier des images par couleur. A partir de cette simple demande, j&rsquo;ai découvert énormément de choses passionnantes. Il est intéressant de constater que plusieurs des techniques évoquées (clustering, proches voisins) sont utilisées dans d&rsquo;autres pans de l&rsquo;informatique, comme la <strong>Data Science</strong> ou <strong>l&rsquo;Intelligence Artificielle</strong>. Il y aurait encore tant à dire et à explorer, je n&rsquo;ai bien entendu pas pu tout mettre ici mais je vous invite vivement à lire les articles mentionnés ici.</p>
<p>J&rsquo;espère que vous aurez pris plaisir à me lire, autant, je l&rsquo;espère, que j&rsquo;en ai pris à découvrir et partager ces savoirs.</p>

      </div>
    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  <div class="flex">
    
      
      
        
        <img
          class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full"
          width="96"
          height="96"
          alt="nathan.out"
          src="/img/author_hu00bba01d950a59fc7877b060fc60a3bd_21567_192x192_fill_q75_box_smart1.jpg"
        />
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">
          Auteur
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          nathan.out
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/nathan-out"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/posts/a-propos-de-la-guerre-en-ukraine-geographie-et-histoire/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >A Propos De La Guerre en Ukraine : Geographie Et Histoire</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-10-02 22:25:27 &#43;0200 CEST">2 octobre 2022</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        
          <div
            class="absolute top-[100vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"
          >
            <a
              href="#the-top"
              class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
              aria-label="Faire défiler jusqu&#39;au bas de la page"
              title="Faire défiler jusqu&#39;au bas de la page"
            >
              &uarr;
            </a>
          </div>
        
      </main><footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2022
            nathan.out
        </p>
      
      
      
    </div>
    
    
      <div
        class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"
      >
        <button
          id="appearance-switcher"
          class="w-12 h-12 "
          type="button"
          title="Passer au thème sombre"
        >
          <span class="inline dark:hidden">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>

</span>
          <span class="hidden dark:inline">

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>

</span>
        </button>
      </div>
    
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="fixed inset-0 z-50 flex flex-col p-4 sm:p-6 md:p-[10vh] lg:p-[12vh] w-screen h-screen cursor-default bg-neutral-500/50 backdrop-blur-sm dark:bg-neutral-900/50 invisible"
  data-url="https://nathan-out.github.io/"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg border-neutral-200 top-20 bg-neutral dark:bg-neutral-800 dark:border-neutral-700"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative inline-block align-text-bottom icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-transparent focus:outline-2"
          placeholder="Rechercher"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
        title="Fermer (Esc)"
      >
        

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
